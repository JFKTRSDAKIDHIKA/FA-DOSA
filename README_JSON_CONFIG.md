# JSON Configuration Output

This document describes the JSON configuration file automatically generated by the `run_resnet_learnable_template_experiment.py` script.

## Overview

After completing an optimization run, the script automatically saves the final optimized configuration to `final_configuration.json`. This file contains all the learned parameters in a structured, human-readable format that can be used for:

- Cross-verification with other tools like Timeloop
- Downstream analysis and visualization
- Configuration archiving and comparison
- Integration with other optimization frameworks

## File Structure

The JSON file is organized into three main sections:

### 1. Hardware Configuration
```json
{
    "hardware": {
        "num_pes": 54,
        "buffer_sizes_kb": {
            "L1_Registers": 13.67,
            "L2_Scratchpad": 115.00
        }
    }
}
```

- `num_pes`: Number of Processing Elements (PEs)
- `buffer_sizes_kb`: Size of each memory buffer level in KB

### 2. Mapping Configuration
```json
{
    "mapping": {
        "L1_Registers": {
            "N": {"temporal": 1.072, "spatial": 1.205},
            "C": {"temporal": 1.072, "spatial": 1.051},
            ...
        },
        "L2_Scratchpad": {
            "N": {"temporal": 1.072, "spatial": 1.565},
            ...
        }
    }
}
```

- Organized by memory hierarchy level
- Each dimension (N, C, K, P, Q, R, S) has temporal and spatial tiling factors
- Values represent the actual tiling factors (not log-space)

### 3. Fusion Configuration
```json
{
    "fusion": {
        "conv_0": 0.6552,
        "conv_1": 0.7787
    }
}
```

- Each fusion group has an associated probability (0.0 to 1.0)
- Higher values indicate higher likelihood of fusion

## Usage Examples

### Loading Configuration in Python
```python
import json

with open('final_configuration.json', 'r') as f:
    config = json.load(f)

# Access hardware parameters
num_pes = config['hardware']['num_pes']
l1_size = config['hardware']['buffer_sizes_kb']['L1_Registers']

# Access mapping parameters
l1_n_temporal = config['mapping']['L1_Registers']['N']['temporal']

# Access fusion probabilities
conv0_fusion_prob = config['fusion']['conv_0']
```

### Validation
Use the provided test script to validate the configuration:
```bash
python test_json_config_load.py
```

## Notes

- All tensor values are converted to standard Python floats/integers
- Tiling factors are in actual space (not log-space)
- Fusion probabilities are sigmoid-activated (0.0 to 1.0 range)
- The file is formatted with 4-space indentation for readability